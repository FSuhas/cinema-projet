<script>
  if (window.location.pathname == '/candidatures') {
    body.style = 'height: calc(100vh) !important; background: linear-gradient(110deg, rgb(184 184 184) 10%, rgb(255 255 255) 50%, rgba(184 184 184) 90%);';
  }

  let scrollpos = window.scrollY
  const header = document.querySelector("#body")
  const header_height = header.offsetHeight

  const add_class_on_scroll = () => header.classList.add("fade-in")
  const remove_class_on_scroll = () => header.classList.remove("fade-in")

  window.addEventListener('scroll', function() {
    scrollpos = window.scrollY;

    if (scrollpos <= header_height) { add_class_on_scroll() }
    else { remove_class_on_scroll() }

  })
</script>

<%= render 'shared/navbar' %>

<br><br><br>

<div class="container" style="display: flex;justify-content: center;align-items: center;">
  <div class="container" >
    <% @bookings.each do |b| %>
    <p>Pour le : <%= b.post.date.strftime("%m/%y") %></p>
    <hr>
      <%= link_to post_path(b.post_id) do %>
        <div class="card-product" style="margin-bottom: 20px;padding: 10px;justify-content: space-between">
          <strong><%= b.post.titre %></strong><br>
          <small><%= b.post.descriptif.truncate(40) %></small><br>
              <% if b.confirmation === false %>
                <div>
                  <span class="badge bg-warning">En attente</span>
                  <%= link_to booking_path(b), id: 'trash', data: { turbo_method: :delete, turbo_confirm: "Êtes vous sûrs?" } do %>
                    <i class="fas fa-trash"></i>
                  <% end %>
                </div>
                <% else b.confirmation === true %>
                <span class="badge bg-success">Accepté</span>
              <% end %>
          <hr>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
